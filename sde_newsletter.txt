# sde_newsletter v0.1
# Implements an admin-side interface for sending Textpattern pages as email newsletters.
# Small Dog Electronics, Inc.
# http://www.smalldog.com/

# ......................................................................
# This is a plugin for Textpattern - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# ......................................................................

YTo5OntzOjQ6Im5hbWUiO3M6MTQ6InNkZV9uZXdzbGV0dGVyIjtzOjc6InZlcnNpb24iO3M6
MzoiMC4xIjtzOjY6ImF1dGhvciI7czoyNzoiU21hbGwgRG9nIEVsZWN0cm9uaWNzLCBJbmMu
IjtzOjEwOiJhdXRob3JfdXJpIjtzOjI0OiJodHRwOi8vd3d3LnNtYWxsZG9nLmNvbS8iO3M6
MTE6ImRlc2NyaXB0aW9uIjtzOjg2OiJJbXBsZW1lbnRzIGFuIGFkbWluLXNpZGUgaW50ZXJm
YWNlIGZvciBzZW5kaW5nIFRleHRwYXR0ZXJuIHBhZ2VzIGFzIGVtYWlsIG5ld3NsZXR0ZXJz
LiI7czo0OiJ0eXBlIjtpOjE7czo0OiJoZWxwIjtzOjI6IgoKIjtzOjQ6ImNvZGUiO3M6NDcx
NjoiCgovKgogKiBBZG1pbiBJbnRlcmZhY2UKICovCmlmICggQHR4cGludGVyZmFjZSA9PSAn
YWRtaW4nICkKewoJLy8gb25seSBwdWJsaXNoZXJzICYgbWFuYWdpbmcgZWRpdHJzIHNob3Vs
ZCBoYXZlIHBlcm1pc3Npb24gdG8gdXNlIHRoaXMgcGx1Zy1pbgoJYWRkX3ByaXZzKCdzZGVf
bmV3c2xldHRlcicsICcxLDInKTsKCgkvLyBhZGQgdGhlIHRhYiAmIHJlZ2lzdGVyIHRoZSBj
YWxsYmFjawoJcmVnaXN0ZXJfdGFiKCdleHRlbnNpb25zJywgJ3NkZV9uZXdzbGV0dGVyJywg
J3NkZV9uZXdzbGV0dGVyJyk7CglyZWdpc3Rlcl9jYWxsYmFjaygnc2RlX25ld3NsZXR0ZXJf
YWRtaW5fdGFiJywgJ3NkZV9uZXdzbGV0dGVyJyk7Cn0KCmZ1bmN0aW9uIHNkZV9uZXdzbGV0
dGVyX2FkbWluX3RhYigkZXZlbnQsICRzdGVwKQp7CgkkcHVibGlzaF9mb3JtID0gJyc7CgoJ
JGNvbnRlbnRfdXJsID0gJGVtYWlsX3RvID0gJGVtYWlsX2Zyb20gPSAkZW1haWxfZnJvbV91
c2VyID0gJGVtYWlsX2Zyb21fb3RoZXIgPSAkZW1haWxfc3ViamVjdCA9ICRlbWFpbF9zdWJq
ZWN0X290aGVyID0gJyc7CgkkdXNlcnMgPSBhcnJheSgpOwoJJGZvcm1fdmFsaWRhdGVkID0g
dHJ1ZTsKCglwYWdldG9wKCdzZGVfcHVibGlzaCAnLCAoJHN0ZXAgPT0gJ3B1Ymxpc2gnID8g
J05ld3NsZXR0ZXIgUHVibGlzaGVkJyA6ICcnKSk7CgoJLy8gd2FzIHRoZSAncHVibGlzaCcg
YnV0dG9uIGNsaWNrZWQ/CglpZiAoICRzdGVwID09ICdwdWJsaXNoJyApCgl7CgkJLy8gZ3Jh
YiBvdXIgc3VibWl0dGVkIGRhdGEKCQkkY29udGVudF91cmwgPSBwcygnY29udGVudF91cmwn
KTsKCQkkZW1haWxfdG8gPSBwcygnZW1haWxfdG8nKTsKCQkkZW1haWxfZnJvbSA9IHBzKCdl
bWFpbF9mcm9tJyk7CgkJJGVtYWlsX2Zyb21fdXNlciA9IHBzKCdlbWFpbF9mcm9tX3VzZXIn
KTsKCQkkZW1haWxfZnJvbV9vdGhlciA9IHBzKCdlbWFpbF9mcm9tX290aGVyJyk7CgkJJGVt
YWlsX3N1YmplY3QgPSBwcygnZW1haWxfc3ViamVjdCcpOwoJCSRlbWFpbF9zdWJqZWN0X290
aGVyID0gcHMoJ2VtYWlsX3N1YmplY3Rfb3RoZXInKTsKCgkJLy8gdmFsaWRhdGUgdGhlIGZv
cm0gZGF0YQoJCWlmICggIWVtcHR5KCRjb250ZW50X3VybCkgJiYgIWVtcHR5KCRlbWFpbF90
bykgKQoJCXsKCQkJaWYgKCAkZW1haWxfZnJvbSA9PSAnb3RoZXInICkKCQkJewoJCQkJaWYg
KCBlbXB0eSgkZW1haWxfZnJvbV9vdGhlcikgKQoJCQkJewoJCQkJCSRmb3JtX3ZhbGlkYXRl
ZCA9IGZhbHNlOwoJCQkJCXByaW50KCI8cD5FcnJvcjogVGhlICdPdGhlcicgZmllbGQgZm9y
IHRoZSAnRnJvbScgYWRkcmVzcyB3YXMgZW1wdHkuPC9wPlxuIik7CgkJCQl9CgkJCX0KCgkJ
CWlmICggJGVtYWlsX3N1YmplY3QgPT0gJ290aGVyJyApCgkJCXsKCQkJCWlmICggZW1wdHko
JGVtYWlsX3N1YmplY3Rfb3RoZXIpICkKCQkJCXsKCQkJCQkkZm9ybV92YWxpZGF0ZWQgPSBm
YWxzZTsKCQkJCQlwcmludCgiPHA+RXJyb3I6IFRoZSAnT3RoZXInIGZpZWxkIGZvciB0aGUg
J1N1YmplY3QnIHdhcyBlbXB0eS48L3A+XG4iKTsKCQkJCX0KCQkJfQoJCX0KCQllbHNlCgkJ
ewoJCQkkZm9ybV92YWxpZGF0ZWQgPSBmYWxzZTsKCQkJcHJpbnQoIjxwPkVycm9yOiBUaGUg
J1VSTCcgYW5kICdUbycgZmllbGRzIGFyZSByZXF1aXJlZC48L3A+XG4iKTsKCQl9CgoJCS8v
IGJ1aWxkICYgc2VuZCB0aGUgZW1haWwKCQlpZiAoICRmb3JtX3ZhbGlkYXRlZCApCgkJewoJ
CQkvLyBncmFiIHRoZSBkYXRhIGZyb20gdGhlIFVSTAoJCQkkY2ggPSBjdXJsX2luaXQoJGNv
bnRlbnRfdXJsKTsKCQkJY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1JFVFVSTlRSQU5TRkVS
LCB0cnVlKTsKCQkJJHBhZ2VfY29udGVudCA9IGN1cmxfZXhlYygkY2gpOwoKCQkJLy8gd2Fz
IHRoZSBwYWdlIGNvbnRlbnQgZ3JhYmJlZCBzdWNjZXNzZnVsbHkKCQkJaWYgKCBjdXJsX2Vy
cm9yKCRjaCkgPT0gMCApCgkJCXsKCQkJCS8vIGJ1aWxkIHRoZSBmcm9tIGFkZHJlc3MKCQkJ
CXN3aXRjaCggJGVtYWlsX2Zyb20gKQoJCQkJewoJCQkJCWNhc2UgJ290aGVyJzoKCQkJCQkJ
JGZyb20gPSAkZW1haWxfZnJvbV9vdGhlcjsKCQkJCQkJYnJlYWs7CgkJCQkJY2FzZSAndGV4
dHBhdHRlcm5fdXNlcic6CgkJCQkJCSRmcm9tID0gc2FmZV9maWVsZCgnUmVhbE5hbWUnLCAn
dHhwX3VzZXJzJywgImVtYWlsID0gJyRlbWFpbF9mcm9tX3VzZXInIikuJzwnLiRlbWFpbF9m
cm9tX3VzZXIuJz4nOwoJCQkJCQlicmVhazsKCQkJCX0KCgkJCQkvLyBidWlsZCB0aGUgZW1h
aWwgc3ViamVjdAoJCQkJJHN1YmplY3QgPSAnJzsKCQkJCXN3aXRjaCggJGVtYWlsX3N1Ympl
Y3QgKQoJCQkJewoJCQkJCWNhc2UgJ290aGVyJzoKCQkJCQkJJHN1YmplY3QgPSAkZW1haWxf
c3ViamVjdF9vdGhlcjsKCQkJCQkJYnJlYWs7CgkJCQkJY2FzZSAncGFnZV90aXRsZSc6CgkJ
CQkJCS8vIHBhcnNlIHRoZSBzdWJqZWN0IG91dCBvZiB0aGUgSFRNTCBjb250ZW50CgkJCQkJ
CWlmICggcHJlZ19tYXRjaF9hbGwoJy88dGl0bGU+KC4qKTxcL3RpdGxlPi9pJywgJHBhZ2Vf
Y29udGVudCwgJHRpdGxlcykgPiAwICkKCQkJCQkJewoJCQkJCQkJLy9wcmludF9yKCR0aXRs
ZXMpOwoJCQkJCQkJJHN1YmplY3QgPSAkdGl0bGVzWzFdWzBdOyAvLyB0aGUgZmlyc3QgdGl0
bGUgZm91bmQKCQkJCQkJfQoJCQkJCQlicmVhazsKCQkJCX0KCgkJCQkvLyBidWlsZCAmIHNl
bmQgdGhlIGVtYWlsCgkJCQlpZiAoIG1haWwoJGVtYWlsX3RvLCAkc3ViamVjdCwgJHBhZ2Vf
Y29udGVudCwgIkZyb206ICIuJGZyb20uIlxyXG5Db250ZW50LXR5cGU6IHRleHQvaHRtbCIp
ICkKCQkJCXsKCQkJCQlwcmludCgiPHA+RW1haWwgc2VudCBzdWNjZXNzZnVsbHkuPC9wPlxu
Iik7CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJcHJpbnQoIjxwPkVycm9yOiBGYWlsZWQg
dG8gc2VuZCBlbWFpbC48L3A+XG4iKTsKCQkJCX0KCQkJfQoJCQllbHNlCgkJCXsKCQkJCXBy
aW50ZigiPHA+RXJyb3IgbG9hZGluZyBVUkwgY29udGVudDogJXMuPC9wPlxuIiwgY3VybF9l
cnJvcigkY2gpKTsKCQkJfQoKCQkJLy8gY2xvc2UgdGhlIGN1cmwgaGFuZGxlCgkJCWN1cmxf
Y2xvc2UoJGNoKTsKCQl9Cgl9CgoJLy8gYnVpbGQgdGhlIHB1Ymxpc2ggZm9ybQoJJHB1Ymxp
c2hfZm9ybSAuPSBlSW5wdXQoJ3NkZV9uZXdzbGV0dGVyJykuIlxuIjsKCSRwdWJsaXNoX2Zv
cm0gLj0gc0lucHV0KCdwdWJsaXNoJykuIlxuIjsKCSRwdWJsaXNoX2Zvcm0gLj0gIjxmaWVs
ZHNldD48bGVnZW5kPlB1Ymxpc2g8L2xlZ2VuZD5cbiI7CgkkcHVibGlzaF9mb3JtIC49ICI8
cD48bGFiZWwgZm9yPVwiY29udGVudF91cmxcIj5VUkw6PC9sYWJlbD4mbmJzcDsiLmZJbnB1
dCgndGV4dCcsICdjb250ZW50X3VybCcsICcnKS4iPC9wPlxuIjsKCSRwdWJsaXNoX2Zvcm0g
Lj0gIjxwPjxsYWJlbCBmb3I9XCJlbWFpbF90b1wiPlRvOjwvbGFiZWw+Jm5ic3A7Ii5mSW5w
dXQoJ3RleHQnLCAnZW1haWxfdG8nLCAnJykuIjwvcD5cbiI7CgkkcHVibGlzaF9mb3JtIC49
ICI8ZmllbGRzZXQ+PGxlZ2VuZD5Gcm9tOjwvbGVnZW5kPlxuIjsKCSRwdWJsaXNoX2Zvcm0g
Lj0gcmFkaW8oJ2VtYWlsX2Zyb20nLCAndGV4dHBhdHRlcm5fdXNlcicsIDEpLiJcbiI7Cgkk
cHVibGlzaF9mb3JtIC49ICI8bGFiZWwgZm9yPVwiZW1haWxfZnJvbVwiPlRleHRwYXR0ZXJu
IHVzZXI6Jm5ic3A7XG4iOwoJJHRleHRwYXR0ZXJuX3VzZXJzID0gc2FmZV9yb3dzKCdlbWFp
bCwgUmVhbE5hbWUnLCAndHhwX3VzZXJzJywgJ3ByaXZzID4gMCcpOwoJZm9yZWFjaCAoICR0
ZXh0cGF0dGVybl91c2VycyBhcyAkcm93ICkKCXsKCQkkdXNlcnNbJHJvd1snZW1haWwnXV0g
PSAkcm93WydSZWFsTmFtZSddOwoJfQoJJHB1Ymxpc2hfZm9ybSAuPSBzZWxlY3RJbnB1dCgn
ZW1haWxfZnJvbV91c2VyJywgJHVzZXJzLCBmYWxzZSk7CgkkcHVibGlzaF9mb3JtIC49ICI8
L2xhYmVsPjxiciAvPlxuIjsKCSRwdWJsaXNoX2Zvcm0gLj0gcmFkaW8oJ2VtYWlsX2Zyb20n
LCAnb3RoZXInLCAwKS4iXG4iOwoJJHB1Ymxpc2hfZm9ybSAuPSAiPGxhYmVsIGZvcj1cImVt
YWlsX2Zyb21cIj5PdGhlcjombmJzcDsiLmZJbnB1dCgndGV4dCcsICdlbWFpbF9mcm9tX290
aGVyJywgJycpLiI8L2xhYmVsPlxuIjsKCSRwdWJsaXNoX2Zvcm0gLj0gIjwvZmllbGRzZXQ+
XG4iOwoJJHB1Ymxpc2hfZm9ybSAuPSAiPGZpZWxkc2V0PjxsZWdlbmQ+U3ViamVjdDo8L2xl
Z2VuZD5cbiI7CgkkcHVibGlzaF9mb3JtIC49IHJhZGlvKCdlbWFpbF9zdWJqZWN0JywgJ3Bh
Z2VfdGl0bGUnLCAxKS4iJm5ic3A7PGxhYmVsPlBhZ2UgdGl0bGU8L2xhYmVsPjxiciAvPlxu
IjsKCSRwdWJsaXNoX2Zvcm0gLj0gcmFkaW8oJ2VtYWlsX3N1YmplY3QnLCAnb3RoZXInLCAw
KS4iJm5ic3A7PGxhYmVsPk90aGVyOiZuYnNwOyIuZklucHV0KCd0ZXh0JywgJ2VtYWlsX3N1
YmplY3Rfb3RoZXInLCAnJykuIjwvbGFiZWw+XG4iOwoJJHB1Ymxpc2hfZm9ybSAuPSAiPC9m
aWVsZHNldD5cbiI7CgkkcHVibGlzaF9mb3JtIC49IGZJbnB1dCgnc3VibWl0JywgJ3B1Ymxp
c2hfc3VibWl0JywgJ0VtYWlsIE5vdycpLiJcbiI7CgkkcHVibGlzaF9mb3JtIC49ICI8L2Zp
ZWxkc2V0PlxuIjsKCgkvLyBvdXRwdXQgdGhlIHB1Ymxpc2ggZm9ybQoJcHJpbnQoZm9ybSgk
cHVibGlzaF9mb3JtLCAnd2lkdGg6IDMwMHB4OyBtYXJnaW4tbGVmdDogYXV0bzsgbWFyZ2lu
LXJpZ2h0OiBhdXRvOycpKTsKCn0KIjtzOjM6Im1kNSI7czozMjoiMWRkMmQ1ZjcwN2YwOTlk
OTIxMDkwODYzM2MzNzZmMWYiO30=
